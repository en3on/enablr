<% if flash[:alert] %>
  <div class="alert alert-warning" role="alert">
    <%= flash[:alert] %>
  </div>
<% end %>

<% if flash[:success] %>
  <div class="alert alert-success" role="alert">
    <%= flash[:success] %>
  </div>
<% end %>

<div class="projects-show-container">
  <div class="project-name-title">
    <h1><%= @project.name %></h1> 
  </div>
  <div class="project-show-description-container">
    <div class="project-show-description"><%= @project.description %></div>
  </div>
  <div class="project-show-image-container">
    <div class="project-image-show"></div>
  </div>
  <div class="project-show-information-container">
    <div><%= @project.hardware ? 'Hardware' : 'Software' %></div>
    <div>Category: <%= @project.category %></div>
    <div>Location: <%= "#{@project.city}, #{@project.country}" %></div>
    <div>Current Amount: <%= @project.current_amount %></div>
    <div>Target Amount: <%= @project.target_amount %></div>
    <div>Target Date: <%= @project.target_date.strftime("%d/%m/%Y") %></div>
    <div>Enablers <%= @project.backer_amount %></div>
        <% if can? :destroy, @project %>
      <%= link_to 'Delete Project', project_path, method: :delete %>
      <%= link_to 'Edit Project', edit_project_path, method: :get %>
    <% end %>
  </div>
</div>

<div class="projects-show-extended">    
  <div class="comments-container"> 
    <%= render 'layouts/shared/comments' %>
  </div> 
  <div class="perks-show-container">
    <h3>Perks</h3>
    <ul>
      <% @perks.each do |perk| %>
        <%= link_to project_perk_path(project_id: @project.id, id: perk.id) do %>
          <li>
          <%= perk.name %>
          <% if can? :edit, perk %>
            <%= link_to "Edit", edit_project_perk_path(project_id: @project.id, id: perk.id) %>
          <% end %>
          <% if can? :destroy, perk %>
            <%= link_to "Delete", project_perk_path(project_id: @project.id, id: perk.id), method: :delete %>
          <% end %>
          </li>
        <% end %>
      <% end %>
    </ul>

    <% if can? :create, Perk.new(project_id: @project.id) %>
      <%= link_to "New Perk", new_project_perk_path(project_id: @project.id) %>
    <% end %>

    <% if user_signed_in? %>
      <% if can? :create, ProjectEnablr.new(project_id: @project, user_id: current_user.id) %>
      <% end %>
    <% end %>
  </div>
</div>